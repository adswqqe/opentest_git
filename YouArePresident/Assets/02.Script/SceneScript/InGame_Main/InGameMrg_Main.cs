using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class InGameMrg_Main : MonoBehaviour
{
    public static InGameMrg_Main inGame_mrg_main;

    public EventContents Quest;

    void Awake()
    {
        if (inGame_mrg_main == null)
            inGame_mrg_main = this;
        else if (inGame_mrg_main != this)
            Destroy(this.gameObject);

        DontDestroyOnLoad(this.gameObject);
    }

    void OnEnable()
    {
        SetQuset();
    }

    void SetQuset()
    {
        Quest = DataMrg.dataMrg.SetContentsData();
    }

    // DataMrg의 InputData의 설계를 잘못함. swhich문으로 짜면 하나밖에 입력이 안되므로
    // 나머지가 다 씹힘. 차라리 여기서 Quest를 던져서 DataMrg에서 처리하는게 더 나을듯 함
   public void SetAnwserData(bool _anwser)
    {
        int _spendGold, spendDay, upVolume, downVolume;
        string whatPowerUp, whatPowerDown;

        char[] upPowerArr = new char[5];
        string[] upPowerArrData = new string[5];
        int[] downPowerArr = new int[5];
        string upPower = "";

        int upCount = 0;
        int downCount = 0;

        for(int i = 0; i < Quest.YwhatPowerUp.Length; i++)
        {
            if (Quest.YwhatPowerUp[i] != ',')
            {
                upPowerArr[i] = Quest.YwhatPowerUp[i];
                upPowerArrData[i] = "2" + upPowerArr[i];
                upCount++;
            }
        }

        for (int i = 0; i < Quest.YwhatPowerUp.Length; i++)
        {
            if (Quest.YwhatPowerUp[i] != ',')
                downPowerArr[i] = Quest.YwhatPowerUp[i];
            downCount++;
        }

        if (_anwser)
        {
            DataMrg.dataMrg.InputData(10, Quest.YspendDay);
            DataMrg.dataMrg.InputData(11, Quest.YspendGold);

            for (int i = 0; i < upCount; i++)
                DataMrg.dataMrg.InputData(int.Parse(upPowerArrData[i]),Quest.YupVolume);
        }
        else
        {

        }
    }
}
